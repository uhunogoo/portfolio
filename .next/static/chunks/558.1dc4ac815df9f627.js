"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[558],{6558:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var r=a(7294),n=a(9477),s=a(2854),u=a(7836),o=a(403);let c=function(){{let e=document.createElement("canvas");return!!(e.getContext&&e.getContext("2d"))&&0==e.toDataURL("image/webp").indexOf("data:image/webp")}}(),p=c?".webp":".jpg",x=c?".webp":".png";var l=[{name:"towerModel",type:"gltfLoader",path:"/models/tower-model.glb"},{name:"largeTexture",type:"texture",asset:"startParams",path:"/textures/largeTexture".concat(p)},{name:"otherTextures",type:"texture",asset:"startParams",path:"/textures/otherTextures".concat(p)},{name:"shadowMap",type:"texture",asset:"startParams",path:"/textures/shadowMap".concat(p)},{name:"sandTexture",type:"texture",asset:"startParams",path:"/textures/sand".concat(p)},{name:"groundTexture",type:"texture",asset:"startParams",path:"/textures/forest".concat(p)},{name:"grassTexture",type:"texture",path:"/textures/grass-1".concat(x)},{name:"grassSecondTexture",type:"texture",path:"/textures/grass-2".concat(x)},{name:"fireTexture",type:"texture",path:"/textures/fire".concat(p)},{name:"cloud",type:"texture",path:"/textures/cloud".concat(x)}];function d(e){let{setLoadingProgress:t}=e;if(0===l.length)return;let{setPreloadedContent:a}=r.useContext(o.x),c=l.length,[p,x]=r.useState([]),d=r.useMemo(()=>{let e=new n.TextureLoader,t=new s._,a=new u.E;return t.setDecoderPath("/draco/"),a.setDRACOLoader(t),{textureLoader:e,gltfLoader:a}},[]);if(r.useEffect(()=>{let e=window.setTimeout(()=>{l.map(e=>{m(e,d,x)})},3e3);return()=>{window.clearTimeout(e)}},[d]),r.useEffect(()=>{t(p.length/c*100),p.length===c&&a(p)},[t,p]),p.length!==c)return[]}async function m(e,t,a){let r;if("texture"===e.type?r=await t.textureLoader.loadAsync(e.path):"gltfLoader"===e.type&&(r=await t.gltfLoader.loadAsync(e.path)),!r)return;let n={name:e.name,item:r};a(e=>{let t=null==e?void 0:e.find(e=>e.name===n.name);return t?[...e]:[...e,n]})}}}]);
//# sourceMappingURL=558.1dc4ac815df9f627.js.map